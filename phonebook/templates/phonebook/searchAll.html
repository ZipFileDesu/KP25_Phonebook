<table class="table table-sm table-bordered" id="person-table">
  <thead>
    <tr>
        <th scope="col">ФИО</th>
        <th scope="col">Должность</th>
        <th scope="col">E-Mail</th>
        <th scope="col">Городской телефон</th>
        <th scope="col">IP телефон</th>
        <th scope="col">Регион</th>
        <th scope="col">Кабинет</th>
    </tr>
  </thead>
<tbody>

{% for department in department_list %}
    <tr class="tr-department">
        <th colspan="7" id="department{{ forloop.counter }}"> {{ department }}</th>
    </tr>
    {% for person in person_list %}
        {% if person.department == department %}
        <tr>
            <th scope="row">
                {% if user.is_authenticated %}
                <a href="#" id={{ person.id }}>
                    <i class="fa fa-star-o" data-toggle="tooltip" title="Добавить в избранное"></i>
                </a>
                    {% endif %}
                {{ person }}
            </th>

            {% if person.position %}
                <td>{{ person.position }}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}

            {% if person.email %}
                <td>{{ person.email }}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}

            {% if person.city_phone %}
                <td>{{ person.city_phone }}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}

            {% if person.ip_phone %}
                <td>{{ person.ip_phone}}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}

            {% if person.department %}
                <td>{{ person.department}}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}

            {% if person.room %}
                <td>{{ person.room}}</td>
            {% else %}
                <td>{{ "-" }}</td>
            {% endif %}
        </tr>
        {% endif %}
    {% endfor %}
{% endfor %}
</tbody>
</table>